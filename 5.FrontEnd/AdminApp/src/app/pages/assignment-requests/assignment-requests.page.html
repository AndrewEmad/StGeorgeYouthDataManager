<div class="animate-slide assignment-requests-page">
  <app-content-header
    title="طلبات التخصيص"
    [subtitle]="'طلبات الخدام لتخصيص مخدوم لأنفسهم — بالموافقة يتم تعيين المخدوم للخادم'"
  />

  <app-loader [fullScreen]="true" *ngIf="loading" />

  <p class="error-msg" *ngIf="error">{{ error }}</p>

  <app-empty-state
    *ngIf="!loading && requests.length === 0"
    message="لا توجد طلبات قيد المراجعة"
  />

  <div *ngIf="!loading && requests.length" class="requests-list">
    <app-request-card
      *ngFor="let r of requests"
      [title]="r.studentName"
      [subtitle]="'طلب من: ' + r.requestedByUserName"
      [date]="r.requestedAt"
    >
      <div actions>
        <button type="button" class="btn-outline danger" (click)="reject(r.id)" [disabled]="processingId === r.id">رفض</button>
        <button type="button" class="btn-primary" (click)="approve(r.id)" [disabled]="processingId === r.id">
          {{ processingId === r.id ? 'جاري...' : 'موافقة (تخصيص للخادم)' }}
        </button>
      </div>
    </app-request-card>
  </div>
</div>

<div class="dashboard-wrapper">
  <main class="container">
    <p class="text-muted animate-fade">نظرة عامة على المخدومين ومتابعة الأسبوع</p>

    @if (loading) {
      <app-loader />
    } @else {
      <div class="stats-grid">
        <app-card [class]="'stat-card animate-fade'" style="animation-delay: 0.1s">
          <span class="material-icons icon-box indigo">people</span>
          <div class="stat-info">
            <h3>{{ stats?.totalStudents || 0 }}</h3>
            <p>إجمالي المخدومين</p>
          </div>
        </app-card>
        <app-card [class]="'stat-card animate-fade'" style="animation-delay: 0.2s">
          <span class="material-icons icon-box cyan">phone</span>
          <div class="stat-info">
            <h3>{{ stats?.callsThisWeek ?? 0 }}</h3>
            <p>مكالمات هذا الأسبوع</p>
          </div>
        </app-card>
        <app-card [class]="'stat-card animate-fade'" style="animation-delay: 0.3s">
          <span class="material-icons icon-box emerald">home</span>
          <div class="stat-info">
            <h3>{{ stats?.visitsThisWeek ?? 0 }}</h3>
            <p>زيارات هذا الأسبوع</p>
          </div>
        </app-card>
        <app-card [class]="'stat-card animate-fade'" style="animation-delay: 0.4s">
          <span class="material-icons icon-box amber">event_note</span>
          <div class="stat-info">
            <h3>{{ stats?.studentsNeedingFollowUp || 0 }}</h3>
            <p>متابعات مطلوبة</p>
          </div>
        </app-card>
      </div>

      <section class="actions-section animate-fade" style="animation-delay: 0.5s">
        <h2>روابط سريعة</h2>
        <div class="actions-grid">
          <a routerLink="/students" class="glass-card action-item">
            <span class="material-icons">list_alt</span>
            <span>قائمة المخدومين</span>
          </a>
          <a routerLink="/request-add-student" class="glass-card action-item">
            <span class="material-icons">person_add</span>
            <span>طلب إضافة مخدوم</span>
          </a>
          @if (authService.isSecretary()) {
            <a routerLink="/attendance" class="glass-card action-item">
              <span class="material-icons">event_available</span>
              <span>تسجيل الحضور</span>
            </a>
          }
        </div>
      </section>
    }
  </main>
</div>
